<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{admin/layout :: layout(~{::content}, 'T·ªïng quan', 'Th·ªëng k√™ v√† ho·∫°t ƒë·ªông h·ªá th·ªëng', 'dashboard')}">
<div th:fragment="content">
    <!-- Welcome Section -->
    <div class="mb-8 animate-fade-in">
        <div class="bg-gradient-to-r from-primary-500 via-primary-600 to-primary-700 rounded-2xl p-8 text-white relative overflow-hidden">
            <div class="absolute inset-0 bg-black/10 backdrop-blur-sm"></div>
            <div class="relative z-10">
                <h1 class="text-3xl font-bold mb-2">Ch√†o m·ª´ng tr·ªü l·∫°i! üëã</h1>
                <p class="text-primary-100 text-lg">H√¥m nay l√† m·ªôt ng√†y tuy·ªát v·ªùi ƒë·ªÉ qu·∫£n l√Ω NutriCook</p>
                <div class="mt-6 flex items-center space-x-4">
                    <div class="flex items-center space-x-2">
                        <div class="w-3 h-3 bg-green-400 rounded-full animate-pulse"></div>
                        <span class="text-sm text-primary-100">H·ªá th·ªëng ho·∫°t ƒë·ªông t·ªët</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <i class="fa-solid fa-clock text-primary-100"></i>
                        <span class="text-sm text-primary-100" id="currentTime"></span>
                    </div>
                </div>
            </div>
            <div class="absolute -top-10 -right-10 w-40 h-40 bg-white/10 rounded-full blur-xl"></div>
            <div class="absolute -bottom-10 -left-10 w-32 h-32 bg-white/5 rounded-full blur-xl"></div>
        </div>
    </div>

    <!-- Stats Cards -->
    <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4 mb-8">
        <!-- Users Card -->
        <div class="group relative overflow-hidden rounded-2xl bg-white/80 dark:bg-neutral-800/80 backdrop-blur-xl p-6 shadow-xl hover:shadow-2xl transition-all duration-500 ease-out border border-white/20 dark:border-neutral-700/50 hover:scale-105 hover:-translate-y-1 animate-slide-up" style="animation-delay: 0.1s">
            <div class="absolute inset-0 bg-gradient-to-br from-blue-500/10 to-purple-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
            <div class="relative z-10">
                <div class="flex items-center justify-between">
                    <div class="flex-shrink-0 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 p-3 shadow-lg group-hover:shadow-xl transition-all duration-300">
                        <i class="fa-solid fa-users text-white h-6 w-6"></i>
                    </div>
                    <div class="text-right">
                        <div class="text-2xl font-bold text-neutral-900 dark:text-white" th:text="${userCount}">0</div>
                        <div class="text-xs text-neutral-500 dark:text-neutral-400">+12% t·ª´ tu·∫ßn tr∆∞·ªõc</div>
                    </div>
                </div>
                <div class="mt-4">
                    <p class="text-sm font-semibold text-neutral-600 dark:text-neutral-300">T·ªïng ng∆∞·ªùi d√πng</p>
                    <div class="mt-2 w-full bg-neutral-200 dark:bg-neutral-700 rounded-full h-2">
                        <div class="bg-gradient-to-r from-blue-500 to-blue-600 h-2 rounded-full transition-all duration-1000 ease-out" style="width: 75%"></div>
                    </div>
                </div>
                <div class="mt-4 flex justify-between items-center">
                    <a th:href="@{/admin/users}" class="text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors duration-200 flex items-center">
                        Xem chi ti·∫øt
                        <i class="fa-solid fa-arrow-right ml-2 transition-transform duration-200 group-hover:translate-x-1"></i>
                    </a>
                    <div class="flex space-x-1">
                        <div class="w-2 h-2 bg-blue-400 rounded-full animate-bounce" style="animation-delay: 0s"></div>
                        <div class="w-2 h-2 bg-blue-400 rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
                        <div class="w-2 h-2 bg-blue-400 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Foods Card -->
        <div class="group relative overflow-hidden rounded-2xl bg-white/80 dark:bg-neutral-800/80 backdrop-blur-xl p-6 shadow-xl hover:shadow-2xl transition-all duration-500 ease-out border border-white/20 dark:border-neutral-700/50 hover:scale-105 hover:-translate-y-1 animate-slide-up" style="animation-delay: 0.2s">
            <div class="absolute inset-0 bg-gradient-to-br from-green-500/10 to-emerald-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
            <div class="relative z-10">
                <div class="flex items-center justify-between">
                    <div class="flex-shrink-0 rounded-xl bg-gradient-to-br from-green-500 to-green-600 p-3 shadow-lg group-hover:shadow-xl transition-all duration-300">
                        <i class="fa-solid fa-utensils text-white h-6 w-6"></i>
                    </div>
                    <div class="text-right">
                        <div class="text-2xl font-bold text-neutral-900 dark:text-white" th:text="${foodCount}">0</div>
                        <div class="text-xs text-neutral-500 dark:text-neutral-400">+8% t·ª´ tu·∫ßn tr∆∞·ªõc</div>
                    </div>
                </div>
                <div class="mt-4">
                    <p class="text-sm font-semibold text-neutral-600 dark:text-neutral-300">S·ªë m√≥n ƒÉn</p>
                    <div class="mt-2 w-full bg-neutral-200 dark:bg-neutral-700 rounded-full h-2">
                        <div class="bg-gradient-to-r from-green-500 to-green-600 h-2 rounded-full transition-all duration-1000 ease-out" style="width: 85%"></div>
                    </div>
                </div>
                <div class="mt-4 flex justify-between items-center">
                    <a th:href="@{/admin/foods}" class="text-sm font-medium text-green-600 dark:text-green-400 hover:text-green-700 dark:hover:text-green-300 transition-colors duration-200 flex items-center">
                        Xem chi ti·∫øt
                        <i class="fa-solid fa-arrow-right ml-2 transition-transform duration-200 group-hover:translate-x-1"></i>
                    </a>
                    <div class="flex space-x-1">
                        <div class="w-2 h-2 bg-green-400 rounded-full animate-bounce" style="animation-delay: 0s"></div>
                        <div class="w-2 h-2 bg-green-400 rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
                        <div class="w-2 h-2 bg-green-400 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Categories Card -->
        <div class="group relative overflow-hidden rounded-2xl bg-white/80 dark:bg-neutral-800/80 backdrop-blur-xl p-6 shadow-xl hover:shadow-2xl transition-all duration-500 ease-out border border-white/20 dark:border-neutral-700/50 hover:scale-105 hover:-translate-y-1 animate-slide-up" style="animation-delay: 0.3s">
            <div class="absolute inset-0 bg-gradient-to-br from-orange-500/10 to-yellow-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
            <div class="relative z-10">
                <div class="flex items-center justify-between">
                    <div class="flex-shrink-0 rounded-xl bg-gradient-to-br from-orange-500 to-orange-600 p-3 shadow-lg group-hover:shadow-xl transition-all duration-300">
                        <i class="fa-solid fa-tags text-white h-6 w-6"></i>
                    </div>
                    <div class="text-right">
                        <div class="text-2xl font-bold text-neutral-900 dark:text-white" th:text="${categoryCount}">0</div>
                        <div class="text-xs text-neutral-500 dark:text-neutral-400">+5% t·ª´ tu·∫ßn tr∆∞·ªõc</div>
                    </div>
                </div>
                <div class="mt-4">
                    <p class="text-sm font-semibold text-neutral-600 dark:text-neutral-300">Danh m·ª•c</p>
                    <div class="mt-2 w-full bg-neutral-200 dark:bg-neutral-700 rounded-full h-2">
                        <div class="bg-gradient-to-r from-orange-500 to-orange-600 h-2 rounded-full transition-all duration-1000 ease-out" style="width: 60%"></div>
                    </div>
                </div>
                <div class="mt-4 flex justify-between items-center">
                    <a th:href="@{/admin/categories}" class="text-sm font-medium text-orange-600 dark:text-orange-400 hover:text-orange-700 dark:hover:text-orange-300 transition-colors duration-200 flex items-center">
                        Xem chi ti·∫øt
                        <i class="fa-solid fa-arrow-right ml-2 transition-transform duration-200 group-hover:translate-x-1"></i>
                    </a>
                    <div class="flex space-x-1">
                        <div class="w-2 h-2 bg-orange-400 rounded-full animate-bounce" style="animation-delay: 0s"></div>
                        <div class="w-2 h-2 bg-orange-400 rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
                        <div class="w-2 h-2 bg-orange-400 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Activity Card -->
        <div class="group relative overflow-hidden rounded-2xl bg-white/80 dark:bg-neutral-800/80 backdrop-blur-xl p-6 shadow-xl hover:shadow-2xl transition-all duration-500 ease-out border border-white/20 dark:border-neutral-700/50 hover:scale-105 hover:-translate-y-1 animate-slide-up" style="animation-delay: 0.4s">
            <div class="absolute inset-0 bg-gradient-to-br from-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
            <div class="relative z-10">
                <div class="flex items-center justify-between">
                    <div class="flex-shrink-0 rounded-xl bg-gradient-to-br from-purple-500 to-purple-600 p-3 shadow-lg group-hover:shadow-xl transition-all duration-300">
                        <i class="fa-solid fa-history text-white h-6 w-6"></i>
                    </div>
                    <div class="text-right">
                        <div class="text-2xl font-bold text-neutral-900 dark:text-white" th:text="${updateCount ?: 0}">0</div>
                        <div class="text-xs text-neutral-500 dark:text-neutral-400">+15% t·ª´ tu·∫ßn tr∆∞·ªõc</div>
                    </div>
                </div>
                <div class="mt-4">
                    <p class="text-sm font-semibold text-neutral-600 dark:text-neutral-300">Ho·∫°t ƒë·ªông (24h)</p>
                    <div class="mt-2 w-full bg-neutral-200 dark:bg-neutral-700 rounded-full h-2">
                        <div class="bg-gradient-to-r from-purple-500 to-purple-600 h-2 rounded-full transition-all duration-1000 ease-out" style="width: 90%"></div>
                    </div>
                </div>
                <div class="mt-4 flex justify-between items-center">
                    <a th:href="@{/admin/updates}" class="text-sm font-medium text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300 transition-colors duration-200 flex items-center">
                        Xem chi ti·∫øt
                        <i class="fa-solid fa-arrow-right ml-2 transition-transform duration-200 group-hover:translate-x-1"></i>
                    </a>
                    <div class="flex space-x-1">
                        <div class="w-2 h-2 bg-purple-400 rounded-full animate-bounce" style="animation-delay: 0s"></div>
                        <div class="w-2 h-2 bg-purple-400 rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
                        <div class="w-2 h-2 bg-purple-400 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main content -->
    <div class="grid grid-cols-1 gap-8 lg:grid-cols-3">
        <!-- Chart Section -->
        <div class="lg:col-span-2 group relative overflow-hidden rounded-2xl bg-white/80 dark:bg-neutral-800/80 backdrop-blur-xl p-8 shadow-xl hover:shadow-2xl transition-all duration-500 ease-out border border-white/20 dark:border-neutral-700/50 animate-slide-up" style="animation-delay: 0.5s">
            <div class="absolute inset-0 bg-gradient-to-br from-primary-500/5 to-blue-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
            <div class="relative z-10">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-xl font-bold text-neutral-900 dark:text-white flex items-center">
                        <div class="p-2 rounded-lg bg-gradient-to-br from-primary-500 to-primary-600 mr-3 shadow-lg">
                            <i class="fa-solid fa-chart-pie text-white"></i>
                        </div>
                        Ph√¢n b·ªë danh m·ª•c
                    </h3>
                    <div class="flex items-center space-x-2">
                        <div class="flex space-x-1">
                            <div class="w-2 h-2 bg-primary-400 rounded-full animate-pulse"></div>
                            <div class="w-2 h-2 bg-primary-400 rounded-full animate-pulse" style="animation-delay: 0.2s"></div>
                            <div class="w-2 h-2 bg-primary-400 rounded-full animate-pulse" style="animation-delay: 0.4s"></div>
                        </div>
                        <span class="text-xs text-neutral-500 dark:text-neutral-400">C·∫≠p nh·∫≠t realtime</span>
                    </div>
                </div>
                <div class="relative">
                    <canvas id="categoryChart" class="w-full h-64"></canvas>
                    <div class="absolute top-4 right-4 bg-white/90 dark:bg-neutral-800/90 backdrop-blur-sm rounded-lg p-3 shadow-lg">
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 bg-green-400 rounded-full animate-pulse"></div>
                            <span class="text-xs font-medium text-neutral-700 dark:text-neutral-300">D·ªØ li·ªáu m·ªõi nh·∫•t</span>
                        </div>
                    </div>
                </div>
                <div class="mt-6 grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="text-center p-3 rounded-lg bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border border-green-200 dark:border-green-700/50">
                        <div class="text-lg font-bold text-green-700 dark:text-green-400">35%</div>
                        <div class="text-xs text-green-600 dark:text-green-500">Rau c·ªß</div>
                    </div>
                    <div class="text-center p-3 rounded-lg bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20 border border-yellow-200 dark:border-yellow-700/50">
                        <div class="text-lg font-bold text-yellow-700 dark:text-yellow-400">25%</div>
                        <div class="text-xs text-yellow-600 dark:text-yellow-500">Tr√°i c√¢y</div>
                    </div>
                    <div class="text-center p-3 rounded-lg bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 border border-red-200 dark:border-red-700/50">
                        <div class="text-lg font-bold text-red-700 dark:text-red-400">20%</div>
                        <div class="text-xs text-red-600 dark:text-red-500">H·∫£i s·∫£n</div>
                    </div>
                    <div class="text-center p-3 rounded-lg bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border border-blue-200 dark:border-blue-700/50">
                        <div class="text-lg font-bold text-blue-700 dark:text-blue-400">20%</div>
                        <div class="text-xs text-blue-600 dark:text-blue-500">Th·ªãt</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recent Activity -->
        <div class="lg:col-span-1 group relative overflow-hidden rounded-2xl bg-white/80 dark:bg-neutral-800/80 backdrop-blur-xl p-8 shadow-xl hover:shadow-2xl transition-all duration-500 ease-out border border-white/20 dark:border-neutral-700/50 animate-slide-up" style="animation-delay: 0.6s">
            <div class="absolute inset-0 bg-gradient-to-br from-blue-500/5 to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
            <div class="relative z-10">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-xl font-bold text-neutral-900 dark:text-white flex items-center">
                        <div class="p-2 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 mr-3 shadow-lg">
                            <i class="fa-solid fa-clock text-white"></i>
                        </div>
                        Ho·∫°t ƒë·ªông g·∫ßn ƒë√¢y
                    </h3>
                    <div class="flex items-center space-x-2">
                        <div class="w-2 h-2 bg-blue-400 rounded-full animate-pulse"></div>
                        <span class="text-xs text-neutral-500 dark:text-neutral-400">24h</span>
                    </div>
                </div>
                <div class="flow-root">
                    <ul role="list" class="-mb-8">
                        <li th:each="u, iterStat : ${recentUpdates}" class="group/item hover:bg-neutral-50 dark:hover:bg-neutral-700/50 rounded-lg p-2 transition-all duration-200 hover:scale-105">
                            <div class="relative pb-8">
                                <span th:if="${!iterStat.last}" class="absolute top-5 left-5 -ml-px h-full w-0.5 bg-gradient-to-b from-neutral-300 to-neutral-100 dark:from-neutral-600 dark:to-neutral-700" aria-hidden="true"></span>
                                <div class="relative flex space-x-4">
                                    <div class="flex-shrink-0">
                                        <span class="h-10 w-10 rounded-full flex items-center justify-center ring-4 ring-white dark:ring-neutral-800 shadow-lg transition-all duration-300 group-hover/item:scale-110"
                                              th:classappend="${u.action == 'CREATE' ? 'bg-gradient-to-br from-green-500 to-green-600' : u.action == 'UPDATE' ? 'bg-gradient-to-br from-blue-500 to-blue-600' : 'bg-gradient-to-br from-red-500 to-red-600'}">
                                            <i class="fa-solid text-white text-sm transition-transform duration-200 group-hover/item:scale-110" th:classappend="${u.action == 'CREATE' ? 'fa-plus' : u.action == 'UPDATE' ? 'fa-pen' : 'fa-trash'}"></i>
                                        </span>
                                    </div>
                                    <div class="min-w-0 flex-1 pt-1.5">
                                        <p class="text-sm text-neutral-600 dark:text-neutral-300">
                                            <span class="font-semibold text-neutral-900 dark:text-white" th:text="${u.user != null ? u.user.fullName : 'System'}"></span>
                                            <span class="text-neutral-500 dark:text-neutral-400" th:text="${u.action.toString().toLowerCase()} + ' '"></span>
                                            <span class="font-semibold text-neutral-900 dark:text-white" th:text="${u.foodItem.name}"></span>
                                        </p>
                                        <p class="mt-1 text-xs text-neutral-500 dark:text-neutral-400 flex items-center">
                                            <i class="fa-solid fa-clock mr-1"></i>
                                            <span th:text="${#temporals.format(u.createdAt, 'HH:mm dd/MM/yyyy')}"></span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ul>
                    <div th:if="${#lists.isEmpty(recentUpdates)}" class="text-center py-12 animate-pulse">
                        <div class="relative">
                            <div class="w-16 h-16 bg-gradient-to-br from-neutral-200 to-neutral-300 dark:from-neutral-600 dark:to-neutral-700 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg">
                                <i class="fa-solid fa-inbox text-neutral-400 dark:text-neutral-500 text-2xl"></i>
                            </div>
                            <div class="absolute -top-2 -right-2 w-6 h-6 bg-gradient-to-br from-blue-400 to-blue-500 rounded-full flex items-center justify-center shadow-lg">
                                <i class="fa-solid fa-plus text-white text-xs"></i>
                            </div>
                        </div>
                        <p class="text-base text-neutral-500 dark:text-neutral-400 font-medium">Ch∆∞a c√≥ ho·∫°t ƒë·ªông n√†o</p>
                        <p class="text-sm text-neutral-400 dark:text-neutral-500 mt-2">H√£y ki·ªÉm tra l·∫°i sau!</p>
                        <div class="mt-4 flex justify-center space-x-1">
                            <div class="w-2 h-2 bg-neutral-300 dark:bg-neutral-600 rounded-full animate-bounce" style="animation-delay: 0s"></div>
                            <div class="w-2 h-2 bg-neutral-300 dark:bg-neutral-600 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                            <div class="w-2 h-2 bg-neutral-300 dark:bg-neutral-600 rounded-full animate-bounce" style="animation-delay: 0.4s"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script th:src="@{/js/chart.js}"></script>
    <script>
        // Update current time
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('vi-VN', {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            document.getElementById('currentTime').textContent = timeString;
        }

        // Update time every second
        updateTime();
        setInterval(updateTime, 1000);

        // Add fade-in animation
        document.addEventListener('DOMContentLoaded', function() {
            const fadeElements = document.querySelectorAll('.animate-fade-in');
            fadeElements.forEach((element, index) => {
                element.style.animationDelay = `${index * 0.1}s`;
            });
        });

        // Add slide-up animation
        const slideUpElements = document.querySelectorAll('.animate-slide-up');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.animationPlayState = 'running';
                }
            });
        });

        slideUpElements.forEach(element => {
            element.style.animationPlayState = 'paused';
            observer.observe(element);
        });
    </script>
</div>
</html>

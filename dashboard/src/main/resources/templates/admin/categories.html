<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{admin/layout :: layout(~{::content}, 'Danh má»¥c nguyÃªn liá»‡u', 'Quáº£n lÃ½ danh má»¥c nguyÃªn liá»‡u', 'categories')}">
<div th:fragment="content">

    <div class="sm:flex sm:items-center">
        <div class="sm:flex-auto">
            </div>
        <div class="mt-4 sm:mt-0 sm:ml-16 sm:flex-none">
            <button type="button" onclick="openModal('addCategoryModal')" class="inline-flex items-center justify-center rounded-xl border border-transparent bg-gradient-to-r from-emerald-500 to-teal-500 px-6 py-3 text-base font-bold text-white shadow-lg hover:from-emerald-600 hover:to-teal-600 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 sm:w-auto transition-all duration-300 transform hover:-translate-y-1 hover:shadow-2xl">
                <i class="fas fa-plus mr-2"></i> ThÃªm danh má»¥c
            </button>
        </div>
    </div>

    <div th:if="${#lists.isEmpty(categories)}" class="text-center py-12 mt-8 bg-white rounded-lg shadow">
        <i class="fa-solid fa-tags fa-2x text-gray-400"></i>
        <h3 class="mt-2 text-sm font-medium text-gray-900">ChÆ°a cÃ³ danh má»¥c nÃ o</h3>
        <p class="mt-1 text-sm text-gray-500">HÃ£y thÃªm danh má»¥c má»›i Ä‘á»ƒ báº¯t Ä‘áº§u quáº£n lÃ½.</p>
    </div>

    <div class="mt-8 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">
        <div th:each="cat : ${categories}" class="col-span-1 flex flex-col rounded-2xl bg-gradient-to-br from-white to-emerald-50 text-center shadow-lg hover:shadow-2xl transition-all duration-300 hover:scale-105 border border-emerald-100 overflow-hidden">
            <!-- Ná»™i dung card -->
            <div class="flex flex-1 flex-col p-8">
                <div class="mx-auto flex h-20 w-20 items-center justify-center rounded-2xl" th:style="'background: linear-gradient(135deg, ' + ${cat.color} + '30, ' + ${cat.color} + '10);'"> 
                    <span class="text-5xl" th:text="${cat.icon}"></span>
                </div>
                <h3 class="mt-6 text-xl font-bold bg-gradient-to-r from-emerald-600 to-teal-600 bg-clip-text text-transparent" th:text="${cat.name}">Category Name</h3>
                <dl class="mt-1 flex flex-grow flex-col justify-between">
                    <dt class="sr-only">Description</dt>
                    <dd class="text-sm text-gray-600 font-medium" th:text="${cat.description}">Description</dd>
                </dl>
            </div>
            
            <!-- 3 nÃºt hÃ nh Ä‘á»™ng á»Ÿ dÆ°á»›i cÃ¹ng - chá»‰ hiá»ƒn thá»‹ icon -->
            <div class="border-t border-emerald-200 bg-emerald-50/50 p-3">
                <div class="flex items-center justify-center gap-2">
                    <a th:href="@{/admin/categories/{id}/ingredients(id=${cat.id})}" 
                       class="group relative flex-1 inline-flex items-center justify-center py-3 px-3 rounded-lg bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white shadow-md hover:shadow-lg transition-all duration-300 transform hover:scale-105"
                       title="Xem nguyÃªn liá»‡u">
                        <i class="fas fa-list text-base"></i>
                        <span class="ml-2 text-xs font-semibold hidden sm:inline">Xem</span>
                        <span class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs font-medium text-white bg-gray-900 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-20">
                            Xem nguyÃªn liá»‡u
                        </span>
                    </a>
                    <a th:href="@{/admin/categories/{id}/edit(id=${cat.id})}" 
                       class="group relative flex-1 inline-flex items-center justify-center py-3 px-3 rounded-lg bg-gradient-to-r from-emerald-500 to-cyan-600 hover:from-emerald-600 hover:to-cyan-700 text-white shadow-md hover:shadow-lg transition-all duration-300 transform hover:scale-105"
                       title="Sá»­a">
                        <i class="fas fa-edit text-base"></i>
                        <span class="ml-2 text-xs font-semibold hidden sm:inline">Sá»­a</span>
                        <span class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs font-medium text-white bg-gray-900 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-20">
                            Sá»­a danh má»¥c
                        </span>
                    </a>
                    <form th:action="@{/admin/categories/{id}/delete(id=${cat.id})}" method="post" class="flex-1" onsubmit="return confirm('Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a danh má»¥c nÃ y?');">
                        <button type="submit" 
                                class="group relative w-full inline-flex items-center justify-center py-3 px-3 rounded-lg bg-gradient-to-r from-rose-500 to-red-600 hover:from-rose-600 hover:to-red-700 text-white shadow-md hover:shadow-lg transition-all duration-300 transform hover:scale-105"
                                title="XÃ³a">
                            <i class="fas fa-trash text-base"></i>
                            <span class="ml-2 text-xs font-semibold hidden sm:inline">XÃ³a</span>
                            <span class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs font-medium text-white bg-gray-900 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-20">
                                XÃ³a danh má»¥c
                            </span>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div id="addCategoryModal" class="relative z-50 hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-black/40 transition-opacity backdrop-blur-sm"></div>
        <div class="fixed inset-0 z-50 overflow-y-auto">
            <div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0">
                <div class="relative transform overflow-hidden rounded-2xl bg-gradient-to-br from-white to-emerald-50 text-left shadow-2xl transition-all sm:my-8 sm:w-full sm:max-w-lg border border-emerald-100">
                    <form th:action="@{/admin/categories}" th:object="${category}" method="post">
                        <div class="bg-gradient-to-r from-emerald-600 to-teal-600 px-6 pt-6 pb-3">
                            <h3 class="text-2xl font-bold bg-gradient-to-r from-white to-emerald-50 bg-clip-text text-transparent">ThÃªm danh má»¥c má»›i</h3>
                        </div>
                        <div class="px-6 pt-6 pb-6 sm:p-8">
                            <div class="space-y-6">
                                <div>
                                    <label for="name" class="block text-sm font-bold text-emerald-900 mb-2">TÃªn danh má»¥c *</label>
                                    <input type="text" th:field="*{name}" id="name" class="block w-full px-4 py-3 rounded-xl border-2 border-emerald-300 bg-white shadow-sm focus:border-emerald-500 focus:ring-2 focus:ring-emerald-300 sm:text-base font-medium" required>
                                </div>
                                <div>
                                    <label for="description" class="block text-sm font-bold text-emerald-900 mb-2">MÃ´ táº£</label>
                                    <textarea th:field="*{description}" id="description" rows="4" class="block w-full px-4 py-3 rounded-xl border-2 border-emerald-300 bg-white shadow-sm focus:border-emerald-500 focus:ring-2 focus:ring-emerald-300 sm:text-base font-medium"></textarea>
                                </div>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label for="icon" class="block text-sm font-bold text-emerald-900 mb-2">Icon (emoji) *</label>
                                        <input type="text" th:field="*{icon}" id="icon" class="block w-full px-4 py-3 rounded-xl border-2 border-emerald-300 bg-white shadow-sm focus:border-emerald-500 focus:ring-2 focus:ring-emerald-300 sm:text-base font-medium" placeholder="VD: ðŸ¥¬" required>
                                    </div>
                                    <div>
                                        <label for="color" class="block text-sm font-bold text-emerald-900 mb-2">MÃ u sáº¯c *</label>
                                        <input type="color" th:field="*{color}" id="color" th:value="*{color} ?: '#FF8C00'" class="block w-full h-12 px-2 rounded-xl cursor-pointer border-2 border-emerald-300 shadow-sm">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="bg-gradient-to-r from-emerald-50 to-teal-50 px-6 py-4 sm:flex sm:flex-row-reverse sm:gap-3 border-t border-emerald-200">
                            <button type="submit" class="inline-flex w-full justify-center items-center rounded-xl border border-transparent bg-gradient-to-r from-emerald-500 via-teal-500 to-cyan-500 px-6 py-3 text-base font-bold text-white shadow-lg hover:from-emerald-600 hover:via-teal-600 hover:to-cyan-600 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 transition-all duration-300 transform hover:scale-105 sm:w-auto">âœ“ ThÃªm</button>
                            <button type="button" onclick="closeModal('addCategoryModal')" class="mt-3 inline-flex w-full justify-center items-center rounded-xl border-2 border-emerald-300 bg-white px-6 py-3 text-base font-bold text-emerald-700 shadow-md hover:bg-emerald-50 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:ring-offset-2 transition-all duration-300 sm:mt-0 sm:w-auto">âœ• Há»§y</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        function openModal(modalId) {
            document.getElementById(modalId).classList.remove('hidden');
        }
        function closeModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
        }
    </script>
</div>
</html>